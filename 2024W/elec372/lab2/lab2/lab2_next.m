 %Sample   Time     Commanded Pos   Encoder 1 Pos   Encoder 2 Pos   Control Effort


data = [    0    0.000            1000               0               0          0.0000;
     1    0.022            1000             125              12          4.8840;
     2    0.044            1000             445              95          4.0611;
     3    0.066            1000             942             229         -1.3022;
     4    0.089            1000            1354             355         -4.7595;
     5    0.111            1000            1574             409         -4.8840;
     6    0.133            1000            1537             405         -4.8565;
     7    0.155            1000            1278             334         -1.5201;
     8    0.177            1000             929             234          1.9359;
     9    0.199            1000             698             160          3.6044;
    10    0.221            1000             663             152          3.1746;
    11    0.243            1000             829             198          0.9225;
    12    0.266            1000            1053             262         -1.3352;
    13    0.288            1000            1204             307         -2.4066;
    14    0.310            1000            1222             315         -2.0977;
    15    0.332            1000            1121             286         -0.7070;
    16    0.354            1000             976             246          0.7552;
    17    0.376            1000             875             217          1.5079;
    18    0.398            1000             860             211          1.3272;
    19    0.421            1000             926             230          0.4164;
    20    0.443            1000            1018             255         -0.5055;
    21    0.465            1000            1080             272         -0.9542;
    22    0.487            1000            1088             275         -0.8474;
    23    0.509            1000            1046             263         -0.2521;
    24    0.531            1000             987             248          0.3358;
    25    0.553            1000             948             237          0.6215;
    26    0.576            1000             943             235          0.5714;
    27    0.598            1000             971             242          0.1551;
    28    0.620            1000            1008             252         -0.2125;
    29    0.642            1000            1032             259         -0.3822;
    30    0.664            1000            1034             260         -0.3462;
    31    0.686            1000            1015             255         -0.0714;
    32    0.708            1000             992             249          0.1593;
    33    0.730            1000             977             245          0.2637;
    34    0.753            1000             976             244          0.2393;
    35    0.775            1000             988             247          0.0562;
    36    0.797            1000            1003             251         -0.0836;
    37    0.819            1000            1012             253         -0.1477;
    38    0.841            1000            1013             254         -0.1313;
    39    0.863            1000            1006             253         -0.0220;
    40    0.885            1000             996             250          0.0659;
    41    0.908            1000             991             248          0.1136;
    42    0.930            1000             990             248          0.1026;
    43    0.952            1000             994             248          0.0379;
    44    0.974            1000            1000             250         -0.0214;
    45    0.996            1000            1004             251         -0.0476;
    46    1.018            1000            1004             251         -0.0433;
    47    1.040            1000            1003             251          0.0024;
    48    1.063            1000            1000             251          0.0147;
    49    1.085            1000             998             251          0.0311;
    50    1.107            1000             997             251          0.0385;
    51    1.129            1000             997             251          0.0342;
    52    1.151            1000             998             251          0.0195;
    53    1.173            1000             999             251          0.0012;
    54    1.195            1000            1000             251         -0.0079;
    55    1.217            1000            1000             251         -0.0043;
    56    1.240            1000            1000             251         -0.0043;
    57    1.262            1000            1000             251         -0.0043;
    58    1.284            1000            1000             251         -0.0043;
    59    1.306            1000            1000             251         -0.0043;
    60    1.328            1000            1000             251         -0.0043;
    61    1.350            1000            1000             251         -0.0043;
    62    1.372            1000            1000             251         -0.0043;
    63    1.395            1000            1000             251         -0.0043;
    64    1.417            1000            1000             251         -0.0043;
    65    1.439            1000            1000             251         -0.0043;
    66    1.461            1000            1000             251         -0.0043;
    67    1.483            1000            1000             251         -0.0043;
    68    1.505            1000            1000             251         -0.0043;
    69    1.527            1000            1000             251         -0.0043;
    70    1.549            1000            1000             251         -0.0043;
    71    1.572            1000            1000             251         -0.0043;
    72    1.594            1000            1000             251         -0.0043;
    73    1.616            1000            1000             251         -0.0043;
    74    1.638            1000            1000             251         -0.0043;
    75    1.660            1000            1000             251         -0.0043;
    76    1.682            1000            1000             251         -0.0043;
    77    1.704            1000            1000             251         -0.0043;
    78    1.727            1000            1000             251         -0.0043;
    79    1.749            1000            1000             251         -0.0043;
    80    1.771            1000            1000             251         -0.0043;
    81    1.793            1000            1000             251         -0.0043;
    82    1.815            1000            1000             251         -0.0043;
    83    1.837            1000            1000             251         -0.0043;
    84    1.859            1000            1000             251         -0.0043;
    85    1.882            1000            1000             251         -0.0043;
    86    1.904            1000            1000             251         -0.0043;
    87    1.926            1000            1000             251         -0.0043;
    88    1.948            1000            1000             251         -0.0043;
    89    1.970            1000            1000             251         -0.0043;
    90    1.992            1000            1000             251         -0.0043;
    91    2.014               0             958             250         -4.8840;
    92    2.036               0             724             199         -4.8840;
    93    2.059               0             286              86         -0.9280;
    94    2.081               0            -182             -54          3.3529;
    95    2.103               0            -494            -143          4.8840;
    96    2.125               0            -583            -163          4.8840;
    97    2.147               0            -423            -124          3.3303;
    98    2.169               0             -98             -30         -0.3254;
    99    2.191               0             211              62         -3.0531;
   100    2.214               0             347             102         -3.6783;
   101    2.236               0             269              81         -2.0940;
   102    2.258               0              58              20          0.2411;
   103    2.280               0            -141             -36          2.0238;
   104    2.302               0            -226             -63          2.3748;
   105    2.324               0            -184             -51          1.4927;
   106    2.346               0             -52             -15         -0.0183;
   107    2.368               0              81              22         -1.2289;
   108    2.391               0             143              40         -1.5263;
   109    2.413               0             117              34         -0.9420;
   110    2.435               0              32              10          0.0293;
   111    2.457               0             -51             -12          0.7668;
   112    2.479               0             -87             -22          0.9274;
   113    2.501               0             -68             -18          0.5281;
   114    2.523               0             -12              -3         -0.1007;
   115    2.546               0              40              12         -0.5574;
   116    2.568               0              62              18         -0.6380;
   117    2.590               0              47              15         -0.3700;
   118    2.612               0              11               5          0.0421;
   119    2.634               0             -21              -4          0.3053;
   120    2.656               0             -33              -7          0.3407;
   121    2.678               0             -22              -6          0.1538;
   122    2.701               0               1               1         -0.1062;
   123    2.723               0              21               6         -0.2741;
   124    2.745               0              27               8         -0.2680;
   125    2.767               0              20               8         -0.1526;
   126    2.789               0               5               3          0.0110;
   127    2.811               0              -7               0          0.1068;
   128    2.833               0             -11              -1          0.1026;
   129    2.855               0              -6              -1          0.0354;
   130    2.878               0               4               1         -0.0769;
   131    2.900               0              11               4         -0.1386;
   132    2.922               0              13               5         -0.1313;
   133    2.944               0              11               5         -0.0958;
   134    2.966               0               5               4         -0.0281;
   135    2.988               0               1               2         -0.0049;
   136    3.010               0               1               2         -0.0049;
   137    3.033               0               2               2         -0.0531;
   138    3.055               0               6               2         -0.0672;
   139    3.077               0               7               2         -0.0726;
   140    3.099               0               7               2         -0.0726;
   141    3.121               0               7               2         -0.0726;
   142    3.143               0               5               2         -0.0379;
   143    3.165               0               4               2         -0.0324;
   144    3.188               0               4               2         -0.0342;
   145    3.210               0               5               2         -0.0824;
   146    3.232               0               6               2         -0.0653;
   147    3.254               0               6               2         -0.0672;
   148    3.276               0               6               2         -0.0629;
   149    3.298               0               5               2         -0.0488;
   150    3.320               0               5               2         -0.0488;
   151    3.342               0               5               2         -0.0488;
   152    3.365               0               5               2         -0.0488;
   153    3.387               0               5               2         -0.0488;
   154    3.409               0               5               2         -0.0488;
   155    3.431               0               5               2         -0.0488;
   156    3.453               0               5               2         -0.0488;
   157    3.475               0               5               2         -0.0488;
   158    3.497               0               5               2         -0.0488;
   159    3.520               0               5               2         -0.0488;
   160    3.542               0               5               2         -0.0488;
   161    3.564               0               5               2         -0.0488;
   162    3.586               0               5               2         -0.0488;
   163    3.608               0               5               2         -0.0488;
   164    3.630               0               5               2         -0.0488;
   165    3.652               0               5               2         -0.0488;
   166    3.674               0               5               2         -0.0488;
   167    3.697               0               5               2         -0.0488;
   168    3.719               0               5               2         -0.0488;
   169    3.741               0               5               2         -0.0488;
   170    3.763               0               5               2         -0.0488;
   171    3.785               0               5               2         -0.0488;
   172    3.807               0               5               2         -0.0488;
   173    3.829               0               5               2         -0.0488;
   174    3.852               0               5               2         -0.0488;
   175    3.874               0               5               2         -0.0488;
   176    3.896               0               5               2         -0.0488;
   177    3.918               0               5               2         -0.0488;
   178    3.940               0               5               2         -0.0488;
   179    3.962               0               5               2         -0.0488];


time = data(:,2);
y = data(:,4);
u = data(:,3);
zf = iddata(y,u,0.00884);
Tfd2 = tfest(zf,2,0);

plot(time, y);
hold on;
plot(time, u);

